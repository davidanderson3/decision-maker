<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Drag and Drop Test</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      padding: 40px;
    }
    #test-drag-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: #eef;
      padding: 20px;
      border-radius: 8px;
      max-width: 400px;
      margin: auto;
    }
    .task-box {
      background: #fff;
      padding: 12px;
      border: 1px solid #999;
      border-radius: 6px;
      cursor: move;
      user-select: none;
    }
    .dragging {
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <h2>ðŸ§ª Drag-and-Drop Test</h2>
  <div id="test-drag-list"></div>

  <script>
    const taskList = document.getElementById('test-drag-list');
    const items = ['First Task', 'Second Task', 'Third Task', 'Fourth Task'];

    items.forEach((text, index) => {
      const box = document.createElement('div');
      box.className = 'task-box';
      box.textContent = text;
      box.setAttribute('draggable', 'true');
      box.dataset.id = index;

      box.addEventListener('dragstart', e => {
        box.classList.add('dragging');
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/plain', box.dataset.id);
        console.log('dragstart:', box.textContent);
      });

      box.addEventListener('dragend', () => {
        box.classList.remove('dragging');
        document.querySelectorAll('.task-box').forEach(el => el.style.borderTop = '');
        console.log('dragend');
      });

      box.addEventListener('dragover', e => {
        e.preventDefault();
        const dragging = document.querySelector('.dragging');
        if (!dragging || dragging === box) return;
        const rect = box.getBoundingClientRect();
        const midpoint = rect.top + rect.height / 2;
        if (e.clientY < midpoint) {
          taskList.insertBefore(dragging, box);
        } else {
          taskList.insertBefore(dragging, box.nextSibling);
        }
        box.style.borderTop = '2px solid #4CAF50';
      });

      box.addEventListener('dragleave', () => {
        box.style.borderTop = '';
      });

      taskList.appendChild(box);
    });

    taskList.addEventListener('dragover', e => {
      e.preventDefault(); // allow drop
    });

    taskList.addEventListener('drop', e => {
      e.preventDefault();
      console.log('Drop occurred on container');
    });
  </script>
</body>
</html>
